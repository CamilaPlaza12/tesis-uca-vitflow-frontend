<div class="page">
  <header class="header">
    <div class="header__left">
      <h1>Turnos de donación</h1>
      <p>Controlá la agenda de donaciones del hospital.</p>
    </div>

    <div class="header__right">
      <div class="date">
        Hoy – {{ today | date: 'dd/MM/yyyy' }}
      </div>
    </div>
  </header>

  <section class="layout" [class.with-detail]="!!turnoSeleccionado">
    <div class="left">
      <app-turnos-table
        [turnos]="turnos"
        [turnoSeleccionadoId]="turnoSeleccionado?.id ?? null"
        (selectTurno)="onSelectTurno($event)"
      ></app-turnos-table>
    </div>

    <div class="right" *ngIf="turnoSeleccionado as t">
      <app-turno-detail
        [turno]="t"
        (close)="turnoSeleccionado = null"
        (action)="requestAction($event, t)"
      ></app-turno-detail>
    </div>
  </section>

  <div class="empty-detail" *ngIf="!turnoSeleccionado">
    Seleccioná un turno para ver el detalle.
  </div>
</div>

<app-confirm-modal
  [open]="modalOpen"
  [title]="modalTitle"
  [message]="modalMessage"
  [confirmText]="modalConfirmText"
  [loading]="modalLoading"
  [error]="modalError"
  (confirm)="confirmModal()"
  (cancel)="closeModal()"
></app-confirm-modal>
